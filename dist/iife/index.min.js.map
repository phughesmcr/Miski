{"version":3,"file":"index.min.js","sources":["../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/has.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/set-global.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/native-weak-map.js","../../node_modules/core-js/internals/is-pure.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/redefine.js","../../node_modules/core-js/internals/path.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/to-integer.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/a-function.js","../../node_modules/core-js/internals/collection-delete-all.js","../../node_modules/core-js/modules/esnext.map.delete-all.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/native-symbol.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/iterators.js","../../node_modules/core-js/internals/get-iterator-method.js","../../node_modules/core-js/internals/get-map-iterator.js","../../node_modules/core-js/internals/is-array-iterator-method.js","../../node_modules/core-js/internals/iterator-close.js","../../node_modules/core-js/internals/iterate.js","../../node_modules/core-js/modules/esnext.map.every.js","../../node_modules/core-js/internals/species-constructor.js","../../node_modules/core-js/modules/esnext.map.filter.js","../../node_modules/core-js/modules/esnext.map.find.js","../../node_modules/core-js/modules/esnext.map.find-key.js","../../node_modules/core-js/modules/esnext.map.includes.js","../../node_modules/core-js/internals/same-value-zero.js","../../node_modules/core-js/modules/esnext.map.key-of.js","../../node_modules/core-js/modules/esnext.map.map-keys.js","../../node_modules/core-js/modules/esnext.map.map-values.js","../../node_modules/core-js/modules/esnext.map.merge.js","../../node_modules/core-js/modules/esnext.map.reduce.js","../../node_modules/core-js/modules/esnext.map.some.js","../../node_modules/core-js/modules/esnext.map.update.js","../../node_modules/core-js/internals/collection-add-all.js","../../node_modules/core-js/modules/esnext.set.add-all.js","../../node_modules/core-js/modules/esnext.set.delete-all.js","../../node_modules/core-js/modules/esnext.set.difference.js","../../node_modules/core-js/internals/get-set-iterator.js","../../src/mask.ts","../../src/entity.ts","../../src/pool.ts","../../node_modules/core-js/modules/esnext.set.every.js","../../node_modules/core-js/modules/esnext.set.filter.js","../../node_modules/core-js/modules/esnext.set.find.js","../../node_modules/core-js/modules/esnext.set.intersection.js","../../node_modules/core-js/modules/esnext.set.is-disjoint-from.js","../../node_modules/core-js/modules/esnext.set.is-subset-of.js","../../node_modules/core-js/internals/get-iterator.js","../../node_modules/core-js/modules/esnext.set.is-superset-of.js","../../node_modules/core-js/modules/esnext.set.join.js","../../node_modules/core-js/modules/esnext.set.map.js","../../node_modules/core-js/modules/esnext.set.reduce.js","../../node_modules/core-js/modules/esnext.set.some.js","../../node_modules/core-js/modules/esnext.set.symmetric-difference.js","../../node_modules/core-js/modules/esnext.set.union.js","../../src/world.ts","../../src/component.ts","../../src/system.ts"],"sourcesContent":["var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","module.exports = false;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.8.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: 'Â© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","module.exports = {};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","exports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function (/* ...elements */) {\n  var collection = anObject(this);\n  var remover = aFunction(collection['delete']);\n  var allDeleted = true;\n  var wasDeleted;\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    wasDeleted = remover.call(collection, arguments[k]);\n    allDeleted = allDeleted && wasDeleted;\n  }\n  return !!allDeleted;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar collectionDeleteAll = require('../internals/collection-delete-all');\n\n// `Map.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: function deleteAll(/* ...elements */) {\n    return collectionDeleteAll.apply(this, arguments);\n  }\n});\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","module.exports = {};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var IS_PURE = require('../internals/is-pure');\nvar getIterator = require('../internals/get-iterator');\n\nmodule.exports = IS_PURE ? getIterator : function (it) {\n  // eslint-disable-next-line no-undef\n  return Map.prototype.entries.call(it);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.every` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  every: function every(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return !iterate(iterator, function (key, value, stop) {\n      if (!boundFunction(value, key, map)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.github.io/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.filter` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aFunction(newMap.set);\n    iterate(iterator, function (key, value) {\n      if (boundFunction(value, key, map)) setter.call(newMap, key, value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.find` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  find: function find(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop(value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.findKey` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  findKey: function findKey(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop(key);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar sameValueZero = require('../internals/same-value-zero');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.includes` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  includes: function includes(searchElement) {\n    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {\n      if (sameValueZero(value, searchElement)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","// `SameValueZero` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevaluezero\nmodule.exports = function (x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y || x != x && y != y;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.includes` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  keyOf: function keyOf(searchElement) {\n    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {\n      if (value === searchElement) return stop(key);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.mapKeys` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  mapKeys: function mapKeys(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aFunction(newMap.set);\n    iterate(iterator, function (key, value) {\n      setter.call(newMap, boundFunction(value, key, map), value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.mapValues` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  mapValues: function mapValues(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aFunction(newMap.set);\n    iterate(iterator, function (key, value) {\n      setter.call(newMap, key, boundFunction(value, key, map));\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.merge` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  // eslint-disable-next-line no-unused-vars\n  merge: function merge(iterable /* ...iterbles */) {\n    var map = anObject(this);\n    var setter = aFunction(map.set);\n    var i = 0;\n    while (i < arguments.length) {\n      iterate(arguments[i++], setter, { that: map, AS_ENTRIES: true });\n    }\n    return map;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.reduce` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    aFunction(callbackfn);\n    iterate(iterator, function (key, value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = callbackfn(accumulator, value, key, map);\n      }\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    if (noInitial) throw TypeError('Reduce of empty map with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.some` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  some: function some(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\n\n// `Set.prototype.update` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  update: function update(key, callback /* , thunk */) {\n    var map = anObject(this);\n    var length = arguments.length;\n    aFunction(callback);\n    var isPresentInMap = map.has(key);\n    if (!isPresentInMap && length < 3) {\n      throw TypeError('Updating absent value');\n    }\n    var value = isPresentInMap ? map.get(key) : aFunction(length > 2 ? arguments[2] : undefined)(key, map);\n    map.set(key, callback(value, key, map));\n    return map;\n  }\n});\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function (/* ...elements */) {\n  var set = anObject(this);\n  var adder = aFunction(set.add);\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    adder.call(set, arguments[k]);\n  }\n  return set;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar collectionAddAll = require('../internals/collection-add-all');\n\n// `Set.prototype.addAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  addAll: function addAll(/* ...elements */) {\n    return collectionAddAll.apply(this, arguments);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar collectionDeleteAll = require('../internals/collection-delete-all');\n\n// `Set.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: function deleteAll(/* ...elements */) {\n    return collectionDeleteAll.apply(this, arguments);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  difference: function difference(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    var remover = aFunction(newSet['delete']);\n    iterate(iterable, function (value) {\n      remover.call(newSet, value);\n    });\n    return newSet;\n  }\n});\n","var IS_PURE = require('../internals/is-pure');\nvar getIterator = require('../internals/get-iterator');\n\nmodule.exports = IS_PURE ? getIterator : function (it) {\n  // eslint-disable-next-line no-undef\n  return Set.prototype.values.call(it);\n};\n","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nexport type Mask = Readonly<{\n  value: bigint;\n  has(n: bigint): boolean;\n  set(n: bigint): void;\n  test(n: bigint): boolean;\n  toggle(n: bigint): void;\n  toString(): string;\n  unset(n: bigint): void;\n}>;\n\nexport function combineMasks(...masks: Mask[]): Mask {\n  let n = 0n;\n  masks.forEach((mask) => n |= mask.value);\n  return createMask(n);\n}\n\nexport function createMask(n: bigint): Mask {\n  if (typeof n === 'number') n = BigInt(n);\n\n  let { mask } = { mask: 1n << n };\n\n  const getters = {\n    get value(): bigint {\n      return mask;\n    }\n  };\n\n  const has = function(n: bigint): boolean {\n    if (typeof n === 'number') {\n      n = BigInt(n);\n    }\n    return Boolean((mask & n) === mask);\n  };\n\n  const set = function(n: bigint): void {\n    if (typeof n === 'number') {\n      n = BigInt(n);\n    }\n    mask |= (1n << n);\n  };\n\n  const test = function(n: bigint): boolean {\n    if (typeof n === 'number') {\n      n = BigInt(n);\n    }\n    return Boolean((mask & (1n << n)) !== 0n);\n  };\n\n  const toggle = function(n: bigint): void {\n    if (typeof n === 'number') {\n      n = BigInt(n);\n    }\n    mask ^= (1n << n);\n  };\n\n  const toString = function(): string {\n    return mask.toString(2);\n  };\n\n  const unset = function(n: bigint): void {\n    if (typeof n === 'number') {\n      n = BigInt(n);\n    }\n    mask &= ~(1n << n);\n  };\n\n  return Object.freeze(\n    Object.assign(\n      getters,\n      {\n        has,\n        set,\n        test,\n        toggle,\n        toString,\n        unset,\n      }\n    )\n  );\n}\n","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nimport { Component } from './component';\nimport { createMask } from './mask';\n\nexport type Entity = Readonly<{\n  /** The entity's archetype */\n  archetype: bigint,\n  /** The entity's id */\n  id: bigint,\n  /** Check if a component is present in an entity */\n  hasComponent(component: Component<unknown>): boolean,\n  /** @hidden */\n  _destroy(): Entity,\n  /** @hidden */\n  _setId(id: bigint): Entity,\n  /** @hidden */\n  _addComponent(component: Component<unknown>): Entity,\n  /** @hidden */\n  _removeComponent(component: Component<unknown>): Entity,\n}>\n\n/** Reset an entity to a blank state */\nexport function _destroyEntity(entity: Entity): Entity {\n  entity._destroy();\n  return entity;\n}\n\n/** Create an new entity */\nexport function _createEntity(): Entity {\n  const {\n    archetype,\n    components,\n    componentObjects,\n  } = {\n    archetype: createMask(0n),\n    components: {} as Record<string, unknown>,\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    componentObjects: new Set() as Set<Component<unknown>>,\n  };\n\n  let { _id } = { _id: 0n };\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const data = Object.create(\n    { components },\n    {\n      /** @returns the entity's archetype */\n      archetype: {\n        get: function(): bigint {\n          return archetype.value;\n        }\n      },\n\n      /** @returns the entity's id */\n      id: {\n        get: function(): bigint {\n          return _id;\n        }\n      }\n    }\n  );\n\n  /** @hidden */\n  const _destroy = function(): void {\n    _id = 0n;\n    componentObjects.forEach((component) => _removeComponent(component));\n  };\n\n  /** @hidden */\n  const _setId = function(id: bigint): void {\n    _id = id;\n  };\n\n  /** @hidden */\n  const _addComponent = function<T>(component: Component<T>): void {\n    if (!components[component.name]) {\n      components[component.name] = {...component.properties};\n      archetype.set(component.id);\n      componentObjects.add(component);\n    }\n  };\n\n  /** @hidden */\n  const _removeComponent = function<T>(component: Component<T>): void {\n    if (components[component.name]) {\n      delete components[component.name];\n      archetype.unset(component.id);\n      componentObjects.delete(component);\n    }\n  };\n\n  /**\n   * Check if a component is present in the entity\n   * @param component the component or component name to test for\n   */\n  const hasComponent = function<T>(component: Component<T> | string): boolean {\n    const name = (typeof component === 'string') ? component : component.name;\n    return Boolean(components[name]);\n  };\n\n  return Object.freeze(\n    Object.assign(\n      data,\n      {\n        _destroy,\n        _setId,\n        _addComponent,\n        _removeComponent,\n        hasComponent,\n      }\n    )\n  ) as Entity;\n}","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nexport interface PoolSpec<T> {\n  initialSize?: number | bigint,\n  create: (() => T),\n  destroy: ((obj: T) => T),\n}\n\nexport interface Pool<T> {\n  get(): T,\n  release(obj: T): void,\n}\n\nexport function _createPool<T>(spec: PoolSpec<T>): Pool<T> {\n  const {\n    initialSize = 2,\n    create,\n    destroy\n  } = spec;\n\n  const pool = [] as T[];\n\n  // populate pool to initial size\n  for (let i = 0; i < initialSize; i++) {\n    pool.push(create());\n  }\n\n  const get = function(): T {\n    if (pool.length > 0) {\n      return pool.pop()!;\n    } else {\n      return create();\n    }\n  };\n\n  const release = function(obj: T): void {\n    pool.push(destroy(obj));\n  };\n\n  return Object.freeze({\n    get,\n    release,\n  });\n}","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.every` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  every: function every(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return !iterate(iterator, function (value, stop) {\n      if (!boundFunction(value, value, set)) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.filter` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var adder = aFunction(newSet.add);\n    iterate(iterator, function (value) {\n      if (boundFunction(value, value, set)) adder.call(newSet, value);\n    }, { IS_ITERATOR: true });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.find` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  find: function find(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return iterate(iterator, function (value, stop) {\n      if (boundFunction(value, value, set)) return stop(value);\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  intersection: function intersection(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var hasCheck = aFunction(set.has);\n    var adder = aFunction(newSet.add);\n    iterate(iterable, function (value) {\n      if (hasCheck.call(set, value)) adder.call(newSet, value);\n    });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isDisjointFrom: function isDisjointFrom(iterable) {\n    var set = anObject(this);\n    var hasCheck = aFunction(set.has);\n    return !iterate(iterable, function (value, stop) {\n      if (hasCheck.call(set, value) === true) return stop();\n    }, { INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar getIterator = require('../internals/get-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isSubsetOf: function isSubsetOf(iterable) {\n    var iterator = getIterator(this);\n    var otherSet = anObject(iterable);\n    var hasCheck = otherSet.has;\n    if (typeof hasCheck != 'function') {\n      otherSet = new (getBuiltIn('Set'))(iterable);\n      hasCheck = aFunction(otherSet.has);\n    }\n    return !iterate(iterator, function (value, stop) {\n      if (hasCheck.call(otherSet, value) === false) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","var anObject = require('../internals/an-object');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nmodule.exports = function (it) {\n  var iteratorMethod = getIteratorMethod(it);\n  if (typeof iteratorMethod != 'function') {\n    throw TypeError(String(it) + ' is not iterable');\n  } return anObject(iteratorMethod.call(it));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isSupersetOf: function isSupersetOf(iterable) {\n    var set = anObject(this);\n    var hasCheck = aFunction(set.has);\n    return !iterate(iterable, function (value, stop) {\n      if (hasCheck.call(set, value) === false) return stop();\n    }, { INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.join` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  join: function join(separator) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var sep = separator === undefined ? ',' : String(separator);\n    var result = [];\n    iterate(iterator, result.push, { that: result, IS_ITERATOR: true });\n    return result.join(sep);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.map` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  map: function map(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var adder = aFunction(newSet.add);\n    iterate(iterator, function (value) {\n      adder.call(newSet, boundFunction(value, value, set));\n    }, { IS_ITERATOR: true });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.reduce` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    aFunction(callbackfn);\n    iterate(iterator, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = callbackfn(accumulator, value, value, set);\n      }\n    }, { IS_ITERATOR: true });\n    if (noInitial) throw TypeError('Reduce of empty set with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.some` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  some: function some(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n    return iterate(iterator, function (value, stop) {\n      if (boundFunction(value, value, set)) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  symmetricDifference: function symmetricDifference(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    var remover = aFunction(newSet['delete']);\n    var adder = aFunction(newSet.add);\n    iterate(iterable, function (value) {\n      remover.call(newSet, value) || adder.call(newSet, value);\n    });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  union: function union(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    iterate(iterable, aFunction(newSet.add), { that: newSet });\n    return newSet;\n  }\n});\n","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nimport { Component, ComponentSpec, _createComponent } from './component';\nimport { Entity, _createEntity, _destroyEntity } from './entity';\nimport { _createPool } from './pool';\nimport { System, SystemSpec, _createSystem } from './system';\n\ninterface WorldSpec {\n  initialPoolSize?: number | bigint;\n  maxComponents?: number | bigint;\n}\n\ninterface World {\n  components: Component<unknown>[],\n  entities: Entity[],\n  systems: System[],\n  createEntity(): Entity,\n  removeEntity(entity: Entity): boolean,\n  createComponent<T>(spec: ComponentSpec<T>): Component<T>,\n  removeComponent<T>(component: Component<T>): boolean,\n  addComponentsToEntity(entity: Entity, ...components: Component<unknown>[]): Entity,\n  removeComponentsFromEntity(entity: Entity, ...components: Component<unknown>[]): Entity,\n  createSystem(spec: SystemSpec): System,\n  removeSystem(system: System): boolean,\n  update(dt: number): void,\n}\n\nexport function createWorld(spec: WorldSpec): World {\n  // world config\n  const {\n    initialPoolSize = 10,\n    maxComponents = 1024n,\n  } = spec;\n\n  // constants\n  const {\n    archetypes,\n    components,\n    entities,\n    systems,\n    entityPool,\n  } = {\n    archetypes: new Map() as Map<bigint, Entity[]>,\n    components: new Map() as Map<string, Component<unknown>>,\n    entities: new Map() as Map<bigint, Entity>,\n    systems: [] as System[],\n    entityPool: _createPool({create: _createEntity, destroy: _destroyEntity, initialSize: initialPoolSize}),\n  };\n\n  // variables\n  let {\n    componentCount,\n    entityCount,\n    systemCount,\n  } = {\n    componentCount: 0n,\n    entityCount: 0n,\n    systemCount: 0n,\n  };\n\n  /** @private **/\n  const addEntityToArchetypeArray = (entity: Entity) => {\n    const archetype = archetypes.get(entity.archetype);\n    if (!archetype) {\n      archetypes.set(entity.archetype, [entity]);\n    } else {\n      if (!archetype.includes(entity)) {\n        archetype.push(entity);\n      }\n    }\n  };\n\n  /** @private */\n  const removeEntityFromArchetypeArray = (entity: Entity) => {\n    const archetype = archetypes.get(entity.archetype);\n    const idx = archetype?.indexOf(entity);\n    if (idx && idx > -1) {\n      archetype?.splice(idx, 1);\n    }\n  };\n\n  const getters = {\n    /** @returns an array of components in the world */\n    get components() {\n      return Array.from(Object.values(components)) as Component<unknown>[];\n    },\n\n    /** @returns an array of entities in the world */\n    get entities() {\n      return Array.from(Object.values(entities)) as Entity[];\n    },\n\n    /** @returns an array of systems in the world */\n    get systems() {\n      return Array.from(systems);\n    },\n  };\n\n  /**\n   * Create a new entity\n   * @returns a new entity\n   */\n  const createEntity = function(): Entity {\n    const entity = entityPool.get();\n    const id = ++entityCount;\n    entity._setId(id);\n    entities.set(id, entity);\n    return entity;\n  };\n\n  /**\n   * Remove an entity from the world\n   * and disassociate it from any components in the world\n   * @param entity the entity to remove\n   * @returns true if removed, false if entity not found\n   */\n  const removeEntity = function(entity: Entity): boolean {\n    const b = entities.delete(entity.id);\n    if (b) {\n      entityPool.release(entity);\n    }\n    return b;\n  };\n\n  /**\n   * Create a new component\n   * @param spec the component's specification object\n   * @returns the created component\n   */\n  const createComponent = function<T>(spec: ComponentSpec<T>): Component<T> {\n    if (maxComponents && componentCount > maxComponents) {\n      throw new Error('Maximum component count reached.');\n    }\n    const id = ++componentCount;\n    const component = _createComponent({...spec, id});\n    components.set(component.name, component);\n    return component;\n  };\n\n  /**\n   * Remove a component from the world\n   * and disassociate it from any entities\n   * @param component the component to remove\n   * @returns true if removed, false if component not found\n   */\n  const removeComponent = function<T>(component: Component<T>): boolean {\n    const b = components.delete(component.name);\n    if (b) {\n      component.entities.forEach((entity) => entity._removeComponent(component));\n    }\n    return b;\n  };\n\n  /**\n   * Associate components with an entity\n   * @param entity the entity to add components to\n   * @param components one or more component objects\n   */\n  const addComponentsToEntity = function(entity: Entity, ...components: Component<unknown>[]): Entity {\n    removeEntityFromArchetypeArray(entity);\n    components.forEach((component) => {\n      entity._addComponent(component);\n      component._addEntity(entity);\n    });\n    addEntityToArchetypeArray(entity);\n    return entity;\n  };\n\n  /**\n   * Disassociate components from an entity\n   * @param entity the entity to remove components from\n   * @param components one or more component objects\n   */\n  const removeComponentsFromEntity = function(entity: Entity, ...components: Component<unknown>[]): Entity {\n    removeEntityFromArchetypeArray(entity);\n    components.forEach((component) => {\n      entity._removeComponent(component);\n      component._removeEntity(entity);\n    });\n    addEntityToArchetypeArray(entity);\n    return entity;\n  };\n\n  /**\n   * Create an new system\n   * @param spec the system's specification object\n   * @returns the created system\n   */\n  const createSystem = function(spec: SystemSpec): System {\n    const id = ++systemCount;\n    const system = _createSystem({...spec, id});\n    systems.push(system);\n    return system;\n  };\n\n  /**\n   * Remove a system from the world\n   * @param system the system to remove\n   * @returns true if remove, false if system not found\n   */\n  const removeSystem = function(system: System): boolean {\n    const idx = systems.indexOf(system);\n    if (idx > -1) {\n      systems.splice(idx, 1);\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Update all systems\n   * @param dt frame delta time\n   */\n  const update = function(dt: number): void {\n    systems.forEach((system) => {\n      if (system.enabled) {\n        const entities = archetypes.get(system.archetype);\n        if (entities && entities.length) {\n          system.update(dt, entities);\n        }\n      }\n    });\n  };\n\n  return Object.freeze(\n    Object.assign(\n      getters,\n      {\n        createEntity,\n        removeEntity,\n        createComponent,\n        removeComponent,\n        addComponentsToEntity,\n        removeComponentsFromEntity,\n        createSystem,\n        removeSystem,\n        update,\n      }\n    )\n  );\n}\n\n\n","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nimport { Entity } from './entity';\n\n/** Component specification object */\nexport type ComponentSpec<T> = Omit<InternalComponentSpec<T>, \"id\">;\n\n/** Internal component specification object */\ninterface InternalComponentSpec<T> {\n  id: bigint,\n  name: string,\n  properties: T,\n}\n\nexport interface Component<T> {\n  id: Readonly<bigint>,\n  name: Readonly<string>,\n  entities: Readonly<Entity[]>,\n  properties: T,\n  /** Check if an entity is associated with this category */\n  hasEntity(entity: Entity): boolean\n  /** @hidden */\n  _addEntity(entity: Entity): void,\n  /** @hidden */\n  _removeEntity(entity: Entity): void,\n}\n\n/**\n * Creates a new component object\n * @param spec the components specification object\n */\nexport function _createComponent<T>(spec: InternalComponentSpec<T>): Component<T> {\n  const { id, name, properties } = spec;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const { entities } = { entities: new Set() as Set<Entity> };\n\n  const getters = {\n    get id(): bigint {\n      return id;\n    },\n\n    get name(): string {\n      return name;\n    },\n\n    /** @returns an array of entities associated with this component */\n    get entities(): Entity[] {\n      return Array.from(entities);\n    },\n\n    /** @returns the default properties of this component */\n    get properties(): T {\n      return properties;\n    }\n  };\n\n  /**\n   * @hidden\n   * Associate an entity with this component\n   * @param entity the entity to associate\n   * @returns this component\n   */\n  const _addEntity = function(entity: Entity): void {\n    entities.add(entity);\n  };\n\n  /**\n   * @hidden\n   * Disassociate an entity from this component\n   * @param entity the entity to disassociate\n   * @returns this component\n   */\n  const _removeEntity = function(entity: Entity): void {\n    entities.delete(entity);\n  };\n\n  const hasEntity = function(entity: Entity): boolean {\n    return entities.has(entity);\n  };\n\n  return Object.freeze(\n    Object.assign(\n      getters,\n      {\n        hasEntity,\n        _addEntity,\n        _removeEntity,\n      }\n    )\n  );\n}\n\n","// Copyright (c) 2021 P. Hughes. All rights reserved. MIT license.\n\"use strict\";\n\nimport { Component } from './component';\nimport { Entity } from './entity';\nimport { createMask } from './mask';\n\nexport type SystemSpec = Omit<InternalSystemSpec, \"id\">;\n\ninterface InternalSystemSpec {\n  id: bigint,\n  system: (dt: number, entities: Entity[]) => void,\n  components: Component<unknown>[],\n}\n\nexport type System = Readonly<{\n  archetype: bigint,\n  enabled: boolean,\n  id: bigint,\n  enable(): void,\n  disable(): void,\n  update(dt: number, entities: Entity[]): void,\n}>;\n\nexport function _createSystem(spec: InternalSystemSpec): System {\n  const { id, system, components } = spec;\n\n  const { archetype } = { archetype: createMask(0n) };\n  let { enabled } = { enabled: false };\n\n  components.forEach((component) => archetype.set(component.id));\n\n  const getters = {\n    get id(): bigint {\n      return id;\n    },\n\n    get archetype(): bigint {\n      return archetype.value;\n    },\n\n    get enabled(): boolean {\n      return enabled;\n    },\n  };\n\n  const enable = function(): void {\n    enabled = true;\n  };\n\n  const disable = function(): void {\n    enabled = false;\n  };\n\n  const update = function(dt: number, entities: Entity[]): void {\n    system(dt, entities);\n  };\n\n  return Object.freeze(\n    Object.assign(\n      getters,\n      {\n        enable,\n        disable,\n        update,\n      }\n    )\n  );\n}\n"],"names":["check","it","Math","globalThis","window","self","global","this","Function","exec","error","fails","Object","defineProperty","get","nativePropertyIsEnumerable","propertyIsEnumerable","getOwnPropertyDescriptor","call","1","V","descriptor","enumerable","bitmap","value","configurable","writable","toString","slice","split","classof","IndexedObject","undefined","TypeError","requireObjectCoercible","input","PREFERRED_STRING","isObject","fn","val","valueOf","hasOwnProperty","key","document","EXISTS","createElement","DESCRIPTORS","a","nativeGetOwnPropertyDescriptor","O","P","toIndexedObject","toPrimitive","IE8_DOM_DEFINE","has","createPropertyDescriptor","propertyIsEnumerableModule","f","String","nativeDefineProperty","Attributes","anObject","object","definePropertyModule","createNonEnumerableProperty","SHARED","setGlobal","functionToString","store","inspectSource","set","WeakMap","test","module","push","version","mode","copyright","id","postfix","random","keys","shared","NATIVE_WEAK_MAP","state","wmget","wmhas","wmset","metadata","facade","STATE","uid","hiddenKeys","objectHas","enforce","getterFor","TYPE","type","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","options","unsafe","simple","noTargetGet","source","join","prototype","aFunction","variable","namespace","method","arguments","length","path","ceil","floor","argument","isNaN","min","toInteger","max","createMethod","IS_INCLUDES","$this","el","fromIndex","toLength","index","integer","toAbsoluteIndex","indexOf","includes","concat","getOwnPropertyNames","names","i","result","internalObjectKeys","getOwnPropertySymbols","getBuiltIn","ownKeys","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","target","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","require$$0","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","forced","copyConstructorProperties","sham","redefine","wasDeleted","collection","remover","allDeleted","k","len","proto","real","IS_PURE","deleteAll","collectionDeleteAll","apply","that","b","c","Symbol","NATIVE_SYMBOL","iterator","WellKnownSymbolsStore","createWellKnownSymbol","USE_SYMBOL_AS_UID","withoutSetter","name","wellKnownSymbol","TO_STRING_TAG","CORRECT_ARGUMENTS","classofRaw","TO_STRING_TAG_SUPPORT","tag","tryGet","callee","ITERATOR","Iterators","Map","entries","ArrayPrototype","Array","returnMethod","Result","stopped","iterable","unboundFunction","iterFn","next","step","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","bind","stop","condition","iteratorClose","callFn","getIteratorMethod","done","every","callbackfn","map","getMapIterator","boundFunction","iterate","SPECIES","defaultConstructor","S","C","constructor","filter","newMap","speciesConstructor","setter","find","findKey","searchElement","x","y","keyOf","mapKeys","mapValues","merge","reduce","noInitial","accumulator","some","update","callback","isPresentInMap","adder","add","addAll","collectionAddAll","difference","newSet","Set","values","createMask","n","BigInt","mask","getters","freeze","assign","Boolean","toggle","unset","_destroyEntity","entity","_destroy","_createEntity","archetype","components","componentObjects","_id","create","_removeComponent","component","delete","forEach","_setId","_addComponent","properties","hasComponent","_createPool","spec","initialSize","destroy","pool","pop","release","obj","getSetIterator","intersection","hasCheck","isDisjointFrom","isSubsetOf","iteratorMethod","getIterator","otherSet","isSupersetOf","separator","sep","symmetricDifference","union","createWorld","initialPoolSize","maxComponents","archetypes","entities","systems","entityPool","componentCount","entityCount","systemCount","addEntityToArchetypeArray","removeEntityFromArchetypeArray","idx","splice","from","createEntity","removeEntity","createComponent","Error","_createComponent","hasEntity","_addEntity","_removeEntity","removeComponent","addComponentsToEntity","removeComponentsFromEntity","createSystem","system","_createSystem","enabled","enable","disable","dt","removeSystem"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;4QAAA,IAAIA,MAAQ,SAAUC,GACpB,OAAOA,GAAMA,EAAGC,MAAQA,MAAQD,KAMhCD,MAA2B,iBAAdG,YAA0BA,aACvCH,MAAuB,iBAAVI,QAAsBA,SACnCJ,MAAqB,iBAARK,MAAoBA,OACjCL,MAAuB,iBAAVM,GAAsBA,IAEnC,WAAe,OAAOC,KAAtB,IAAoCC,SAAS,cAATA,SCZrB,SAAUC,GACzB,IACE,QAASA,IACT,MAAOC,GACP,OAAO,OCDOC,OAAM,WACtB,OAA8E,GAAvEC,OAAOC,eAAe,GAAI,EAAG,CAAEC,IAAK,WAAc,OAAO,KAAQ,MCHtEC,EAA6B,GAAGC,qBAChCC,EAA2BL,OAAOK,8BAGpBA,IAA6BF,EAA2BG,KAAK,CAAEC,EAAG,GAAK,GAI/D,SAASH,qBAAqBI,GACtD,IAAIC,EAAaJ,EAAyBV,KAAMa,GAChD,QAASC,GAAcA,EAAWC,YAChCP,4BCZa,SAAUQ,EAAQC,GACjC,MAAO,CACLF,aAAuB,EAATC,GACdE,eAAyB,EAATF,GAChBG,WAAqB,EAATH,GACZC,MAAOA,ICLPG,EAAW,GAAGA,oBAED,SAAU1B,GACzB,OAAO0B,EAAST,KAAKjB,GAAI2B,MAAM,GAAI,ICAjCC,EAAQ,GAAGA,QAGElB,OAAM,WAGrB,OAAQC,OAAO,KAAKI,qBAAqB,MACtC,SAAUf,GACb,MAAsB,UAAf6B,WAAQ7B,GAAkB4B,EAAMX,KAAKjB,EAAI,IAAMW,OAAOX,IAC3DW,uBCRa,SAAUX,GACzB,OAAO8B,ECHQ,SAAU9B,GACzB,GAAU+B,MAAN/B,EAAiB,MAAMgC,UAAU,wBAA0BhC,GAC/D,OAAOA,EDCciC,CAAuBjC,cEL7B,SAAUA,GACzB,MAAqB,iBAAPA,EAAyB,OAAPA,EAA4B,mBAAPA,eCKtC,SAAUkC,EAAOC,GAChC,IAAKC,SAASF,GAAQ,OAAOA,EAC7B,IAAIG,EAAIC,EACR,GAAIH,GAAoD,mBAAxBE,EAAKH,EAAMR,YAA4BU,SAASE,EAAMD,EAAGpB,KAAKiB,IAAS,OAAOI,EAC9G,GAAmC,mBAAvBD,EAAKH,EAAMK,WAA2BH,SAASE,EAAMD,EAAGpB,KAAKiB,IAAS,OAAOI,EACzF,IAAKH,GAAoD,mBAAxBE,EAAKH,EAAMR,YAA4BU,SAASE,EAAMD,EAAGpB,KAAKiB,IAAS,OAAOI,EAC/G,MAAMN,UAAU,4CCZdQ,EAAiB,GAAGA,mBAEP,SAAUxC,EAAIyC,GAC7B,OAAOD,EAAevB,KAAKjB,EAAIyC,ICA7BC,EAAWrC,EAAOqC,SAElBC,EAASP,SAASM,IAAaN,SAASM,EAASE,kBCAnCC,IAAgBnC,OAAM,WACtC,OAEQ,GAFDC,OAAOC,gBDCWZ,ECDkB,MDEpC2C,EAASD,EAASE,cAAc5C,GAAM,ICFM,IAAK,CACtDa,IAAK,WAAc,OAAO,KACzBiC,EDDY,IAAU9C,KECvB+C,EAAiCpC,OAAOK,8BAIhC6B,EAAcE,EAAiC,SAAS/B,yBAAyBgC,EAAGC,GAG9F,GAFAD,EAAIE,gBAAgBF,GACpBC,EAAIE,YAAYF,GAAG,GACfG,EAAgB,IAClB,OAAOL,EAA+BC,EAAGC,GACzC,MAAOxC,IACT,GAAI4C,IAAIL,EAAGC,GAAI,OAAOK,0BAA0BC,EAA2BC,EAAEvC,KAAK+B,EAAGC,GAAID,EAAEC,eChB5E,SAAUjD,GACzB,IAAKoC,SAASpC,GACZ,MAAMgC,UAAUyB,OAAOzD,GAAM,qBAC7B,OAAOA,GCAP0D,EAAuB/C,OAAOC,oBAItBiC,EAAca,EAAuB,SAAS9C,eAAeoC,EAAGC,EAAGU,GAI7E,GAHAC,SAASZ,GACTC,EAAIE,YAAYF,GAAG,GACnBW,SAASD,GACLP,EAAgB,IAClB,OAAOM,EAAqBV,EAAGC,EAAGU,GAClC,MAAOlD,IACT,GAAI,QAASkD,GAAc,QAASA,EAAY,MAAM3B,UAAU,2BAEhE,MADI,UAAW2B,IAAYX,EAAEC,GAAKU,EAAWpC,OACtCyB,MCdQH,EAAc,SAAUgB,EAAQpB,EAAKlB,GACpD,OAAOuC,EAAqBN,EAAEK,EAAQpB,EAAKa,yBAAyB,EAAG/B,KACrE,SAAUsC,EAAQpB,EAAKlB,GAEzB,OADAsC,EAAOpB,GAAOlB,EACPsC,aCLQ,SAAUpB,EAAKlB,GAC9B,IACEwC,EAA4B1D,EAAQoC,EAAKlB,GACzC,MAAOd,GACPJ,EAAOoC,GAAOlB,EACd,OAAOA,GCLPyC,EAAS,uBACD3D,EAAO2D,IAAWC,UAAUD,EAAQ,ICF5CE,EAAmB3D,SAASmB,SAGE,mBAAvByC,EAAMC,gBACfD,EAAMC,cAAgB,SAAUpE,GAC9B,OAAOkE,EAAiBjD,KAAKjB,KAIjC,ICDIqE,EAAKxD,EAAKwC,ECLaZ,IFMV0B,EAAMC,cGRnBE,EAAUjE,EAAOiE,UAEe,mBAAZA,GAA0B,cAAcC,KAAKH,EAAcE,OCLlE,uCCGhBE,UAAiB,SAAU/B,EAAKlB,GAC/B,OAAO4C,EAAM1B,KAAS0B,EAAM1B,QAAiBV,IAAVR,EAAsBA,EAAQ,MAChE,WAAY,IAAIkD,KAAK,CACtBC,QAAS,QACTC,KAAyB,SACzBC,UAAW,4CCRTC,EAAK,EACLC,EAAU7E,KAAK8E,aAEF,SAAUtC,GACzB,MAAO,UAAYgB,YAAe1B,IAARU,EAAoB,GAAKA,GAAO,QAAUoC,EAAKC,GAASpD,SAAS,KJDzFsD,EAAOC,EAAO,UKHD,GNSbX,EAAUjE,EAAOiE,QAgBrB,GAAIY,EAAiB,CACnB,IAAIf,EAAQc,EAAOE,QAAUF,EAAOE,MAAQ,IAAIb,GAC5Cc,EAAQjB,EAAMtD,IACdwE,EAAQlB,EAAMd,IACdiC,EAAQnB,EAAME,IAClBA,EAAM,SAAUrE,EAAIuF,GAGlB,OAFAA,EAASC,OAASxF,EAClBsF,EAAMrE,KAAKkD,EAAOnE,EAAIuF,GACfA,GAET1E,EAAM,SAAUb,GACd,OAAOoF,EAAMnE,KAAKkD,EAAOnE,IAAO,IAElCqD,EAAM,SAAUrD,GACd,OAAOqF,EAAMpE,KAAKkD,EAAOnE,QAEtB,CACL,IAAIyF,ECpCGT,EADkBvC,EDqCH,WCpCDuC,EAAKvC,GAAOiD,IAAIjD,IDqCrCkD,EAAWF,IAAS,EACpBpB,EAAM,SAAUrE,EAAIuF,GAGlB,OAFAA,EAASC,OAASxF,EAClB+D,EAA4B/D,EAAIyF,EAAOF,GAChCA,GAET1E,EAAM,SAAUb,GACd,OAAO4F,IAAU5F,EAAIyF,GAASzF,EAAGyF,GAAS,IAE5CpC,EAAM,SAAUrD,GACd,OAAO4F,IAAU5F,EAAIyF,IAIzB,MAAiB,CACfpB,IAAKA,EACLxD,IAAKA,EACLwC,IAAKA,EACLwC,QAjDY,SAAU7F,GACtB,OAAOqD,EAAIrD,GAAMa,EAAIb,GAAMqE,EAAIrE,EAAI,KAiDnC8F,UA9Cc,SAAUC,GACxB,OAAO,SAAU/F,GACf,IAAImF,EACJ,IAAK/C,SAASpC,KAAQmF,EAAQtE,EAAIb,IAAKgG,OAASD,EAC9C,MAAM/D,UAAU,0BAA4B+D,EAAO,aACnD,OAAOZ,yCOdb,IAAIc,EAAmBC,EAAoBrF,IACvCsF,EAAuBD,EAAoBL,QAC3CO,EAAW3C,OAAOA,QAAQ7B,MAAM,WAEnC4C,UAAiB,SAAUxB,EAAGP,EAAKlB,EAAO8E,GACzC,IAGIlB,EAHAmB,IAASD,KAAYA,EAAQC,OAC7BC,IAASF,KAAYA,EAAQhF,WAC7BmF,IAAcH,KAAYA,EAAQG,YAElB,mBAATjF,IACS,iBAAPkB,GAAoBY,IAAI9B,EAAO,SACxCwC,EAA4BxC,EAAO,OAAQkB,IAE7C0C,EAAQgB,EAAqB5E,IAClBkF,SACTtB,EAAMsB,OAASL,EAASM,KAAmB,iBAAPjE,EAAkBA,EAAM,MAG5DO,IAAM3C,GAIEiG,GAEAE,GAAexD,EAAEP,KAC3B8D,GAAS,UAFFvD,EAAEP,GAIP8D,EAAQvD,EAAEP,GAAOlB,EAChBwC,EAA4Bf,EAAGP,EAAKlB,IATnCgF,EAAQvD,EAAEP,GAAOlB,EAChB0C,UAAUxB,EAAKlB,KAUrBhB,SAASoG,UAAW,YAAY,SAASjF,WAC1C,MAAsB,mBAARpB,MAAsB2F,EAAiB3F,MAAMmG,QAAUrC,EAAc9D,cCpCpED,ECCbuG,UAAY,SAAUC,GACxB,MAA0B,mBAAZA,EAAyBA,OAAW9E,cAGnC,SAAU+E,EAAWC,GACpC,OAAOC,UAAUC,OAAS,EAAIL,UAAUM,EAAKJ,KAAeF,UAAUvG,EAAOyG,IACzEI,EAAKJ,IAAcI,EAAKJ,GAAWC,IAAW1G,EAAOyG,IAAczG,EAAOyG,GAAWC,ICTvFI,EAAOlH,KAAKkH,KACZC,EAAQnH,KAAKmH,gBAIA,SAAUC,GACzB,OAAOC,MAAMD,GAAYA,GAAY,GAAKA,EAAW,EAAID,EAAQD,GAAME,ICJrEE,EAAMtH,KAAKsH,aAIE,SAAUF,GACzB,OAAOA,EAAW,EAAIE,EAAIC,UAAUH,GAAW,kBAAoB,GCLjEI,EAAMxH,KAAKwH,IACXF,EAAMtH,KAAKsH,ICEXG,aAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAOC,EAAIC,GAC1B,IAGIvG,EAHAyB,EAAIE,gBAAgB0E,GACpBX,EAASc,SAAS/E,EAAEiE,QACpBe,EDDS,SAAUA,EAAOf,GAChC,IAAIgB,EAAUT,UAAUQ,GACxB,OAAOC,EAAU,EAAIR,EAAIQ,EAAUhB,EAAQ,GAAKM,EAAIU,EAAShB,GCD/CiB,CAAgBJ,EAAWb,GAIvC,GAAIU,GAAeE,GAAMA,GAAI,KAAOZ,EAASe,GAG3C,IAFAzG,EAAQyB,EAAEgF,OAEGzG,EAAO,OAAO,OAEtB,KAAM0F,EAASe,EAAOA,IAC3B,IAAKL,GAAeK,KAAShF,IAAMA,EAAEgF,KAAWH,EAAI,OAAOF,GAAeK,GAAS,EACnF,OAAQL,IAAgB,IClB1BQ,EDsBa,CAGfC,SAAUV,cAAa,GAGvBS,QAAST,cAAa,IC5B6BS,QCCjDxC,ECFa,CACf,cACA,iBACA,gBACA,uBACA,iBACA,WACA,WDL2B0C,OAAO,SAAU,kBAIlC1H,OAAO2H,qBAAuB,SAASA,oBAAoBtF,GACrE,ODHe,SAAUa,EAAQ0E,GACjC,IAGI9F,EAHAO,EAAIE,gBAAgBW,GACpB2E,EAAI,EACJC,EAAS,GAEb,IAAKhG,KAAOO,GAAIK,IAAIsC,EAAYlD,IAAQY,IAAIL,EAAGP,IAAQgG,EAAOhE,KAAKhC,GAEnE,KAAO8F,EAAMtB,OAASuB,GAAOnF,IAAIL,EAAGP,EAAM8F,EAAMC,SAC7CL,EAAQM,EAAQhG,IAAQgG,EAAOhE,KAAKhC,IAEvC,OAAOgG,ECPAC,CAAmB1F,EAAG2C,UERnBhF,OAAOgI,yBCMFC,WAAW,UAAW,YAAc,SAASC,QAAQ7I,GACpE,IAAIgF,EAAO8D,EAA0BtF,EAAEI,SAAS5D,IAC5C2I,EAAwBI,EAA4BvF,EACxD,OAAOmF,EAAwB3D,EAAKqD,OAAOM,EAAsB3I,IAAOgF,6BCJzD,SAAUgE,EAAQvC,GAIjC,IAHA,IAAIzB,EAAO6D,EAAQpC,GACf7F,EAAiBkD,EAAqBN,EACtCxC,EAA2BiI,EAA+BzF,EACrDgF,EAAI,EAAGA,EAAIxD,EAAKiC,OAAQuB,IAAK,CACpC,IAAI/F,EAAMuC,EAAKwD,GACVnF,IAAI2F,EAAQvG,IAAM7B,EAAeoI,EAAQvG,EAAKzB,EAAyByF,EAAQhE,MCTpFyG,GAAc,kBAEdC,SAAW,SAAUC,EAASC,GAChC,IAAI9H,EAAQ+H,GAAKC,GAAUH,IAC3B,OAAO7H,GAASiI,IACZjI,GAASkI,KACW,mBAAbJ,EAA0B3I,MAAM2I,KACrCA,IAGJE,GAAYJ,SAASI,UAAY,SAAUG,GAC7C,OAAOjG,OAAOiG,GAAQC,QAAQT,GAAa,KAAKU,eAG9CN,GAAOH,SAASG,KAAO,GACvBG,GAASN,SAASM,OAAS,IAC3BD,GAAWL,SAASK,SAAW,OAElBL,SCnBbnI,GAA2B6I,EAA2DrG,UAqBzE,SAAU6C,EAASI,GAClC,IAGYuC,EAAQvG,EAAKqH,EAAgBC,EAAgB3I,EAHrD4I,EAAS3D,EAAQ2C,OACjBiB,EAAS5D,EAAQhG,OACjB6J,EAAS7D,EAAQ8D,KASrB,GANEnB,EADEiB,EACO5J,EACA6J,EACA7J,EAAO2J,IAAW/F,UAAU+F,EAAQ,KAEnC3J,EAAO2J,IAAW,IAAIrD,UAEtB,IAAKlE,KAAOgE,EAAQ,CAQ9B,GAPAsD,EAAiBtD,EAAOhE,GAGtBqH,EAFEzD,EAAQG,aACVpF,EAAaJ,GAAyBgI,EAAQvG,KACfrB,EAAWG,MACpByH,EAAOvG,IACtB0G,GAASc,EAASxH,EAAMuH,GAAUE,EAAS,IAAM,KAAOzH,EAAK4D,EAAQ+D,cAE5CrI,IAAnB+H,EAA8B,CAC3C,UAAWC,UAA0BD,EAAgB,SACrDO,0BAA0BN,EAAgBD,IAGxCzD,EAAQiE,MAASR,GAAkBA,EAAeQ,OACpDvG,EAA4BgG,EAAgB,QAAQ,GAGtDQ,EAASvB,EAAQvG,EAAKsH,EAAgB1D,iBCnDzB,SAAUrG,GACzB,GAAiB,mBAANA,EACT,MAAMgC,UAAUyB,OAAOzD,GAAM,sBAC7B,OAAOA,uBCEM,WAKf,IAJA,IAGIwK,EAHAC,EAAa7G,SAAStD,MACtBoK,EAAU9D,YAAU6D,EAAmB,QACvCE,GAAa,EAERC,EAAI,EAAGC,EAAM7D,UAAUC,OAAQ2D,EAAIC,EAAKD,IAC/CJ,EAAaE,EAAQzJ,KAAKwJ,EAAYzD,UAAU4D,IAChDD,EAAaA,GAAcH,EAE7B,QAASG,WCPT,CAAE3B,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DC,UAAW,SAASA,YAClB,OAAOC,oBAAoBC,MAAM7K,KAAM0G,cCN3C,wBAAiB,SAAU3E,EAAI+I,EAAMnE,GAEnC,GADAL,YAAUvE,QACGN,IAATqJ,EAAoB,OAAO/I,EAC/B,OAAQ4E,GACN,KAAK,EAAG,OAAO,WACb,OAAO5E,EAAGpB,KAAKmK,IAEjB,KAAK,EAAG,OAAO,SAAUtI,GACvB,OAAOT,EAAGpB,KAAKmK,EAAMtI,IAEvB,KAAK,EAAG,OAAO,SAAUA,EAAGuI,GAC1B,OAAOhJ,EAAGpB,KAAKmK,EAAMtI,EAAGuI,IAE1B,KAAK,EAAG,OAAO,SAAUvI,EAAGuI,EAAGC,GAC7B,OAAOjJ,EAAGpB,KAAKmK,EAAMtI,EAAGuI,EAAGC,IAG/B,OAAO,WACL,OAAOjJ,EAAG8I,MAAMC,EAAMpE,kBCnBPrG,OAAOgI,wBAA0BjI,OAAM,WAGxD,OAAQ+C,OAAO8H,gBCHAC,KAEXD,OAAOjB,MAEkB,iBAAnBiB,OAAOE,SCCfC,GAAwBzG,EAAO,OAC/BsG,GAASlL,EAAOkL,OAChBI,GAAwBC,GAAoBL,GAASA,IAAUA,GAAOM,eAAiBnG,oBAE1E,SAAUoG,GAIvB,OAHGzI,IAAIqI,GAAuBI,KAC1BN,IAAiBnI,IAAIkI,GAAQO,GAAOJ,GAAsBI,GAAQP,GAAOO,GACxEJ,GAAsBI,GAAQH,GAAsB,UAAYG,IAC9DJ,GAAsBI,ICZ7BvH,GAAO,GAEXA,GAHoBwH,gBAAgB,gBAGd,IAEtB,OAAkC,eAAjBtI,OAAOc,ICHpByH,GAAgBD,gBAAgB,eAEhCE,GAAuE,aAAnDC,WAAW,WAAc,OAAOlF,UAArB,OAUlBmF,GAAwBD,WAAa,SAAUlM,GAC9D,IAAIgD,EAAGoJ,EAAK3D,EACZ,YAAc1G,IAAP/B,EAAmB,YAAqB,OAAPA,EAAc,OAEM,iBAAhDoM,EAXD,SAAUpM,EAAIyC,GACzB,IACE,OAAOzC,EAAGyC,GACV,MAAOhC,KAQS4L,CAAOrJ,EAAIrC,OAAOX,GAAKgM,KAA8BI,EAEnEH,GAAoBC,WAAWlJ,GAEH,WAA3ByF,EAASyD,WAAWlJ,KAAsC,mBAAZA,EAAEsJ,OAAuB,YAAc7D,MCxB3E,GCIb8D,GAAWR,gBAAgB,8BAEd,SAAU/L,GACzB,GAAU+B,MAAN/B,EAAiB,OAAOA,EAAGuM,KAC1BvM,EAAG,eACHwM,GAAU3K,GAAQ7B,oBCNgB,SAAUA,GAEjD,OAAOyM,IAAI9F,UAAU+F,QAAQzL,KAAKjB,ICFhCuM,GAAWR,gBAAgB,YAC3BY,GAAiBC,MAAMjG,wBCFV,SAAU8E,GACzB,IAAIoB,EAAepB,EAAiB,OACpC,QAAqB1J,IAAjB8K,EACF,OAAOjJ,SAASiJ,EAAa5L,KAAKwK,IAAWlK,OCE7CuL,OAAS,SAAUC,EAAStE,GAC9BnI,KAAKyM,QAAUA,EACfzM,KAAKmI,OAASA,WAGC,SAAUuE,EAAUC,EAAiB5G,GACpD,IAKIoF,EAAUyB,EAAQlF,EAAOf,EAAQwB,EAAQ0E,EAAMC,EFX1BpN,EEMrBoL,EAAO/E,GAAWA,EAAQ+E,KAC1BiC,KAAgBhH,IAAWA,EAAQgH,YACnCC,KAAiBjH,IAAWA,EAAQiH,aACpCC,KAAiBlH,IAAWA,EAAQkH,aACpClL,EAAKmL,oBAAKP,EAAiB7B,EAAM,EAAIiC,EAAaE,GAGlDE,KAAO,SAAUC,GAEnB,OADIjC,GAAUkC,cAAclC,GACrB,IAAIqB,QAAO,EAAMY,IAGtBE,OAAS,SAAUrM,GACrB,OAAI8L,GACFzJ,SAASrC,GACFgM,EAAclL,EAAGd,EAAM,GAAIA,EAAM,GAAIkM,MAAQpL,EAAGd,EAAM,GAAIA,EAAM,KAChEgM,EAAclL,EAAGd,EAAOkM,MAAQpL,EAAGd,IAG9C,GAAI+L,EACF7B,EAAWuB,MACN,CAEL,GAAqB,mBADrBE,EAASW,kBAAkBb,IACM,MAAMhL,UAAU,0BAEjD,QF9BYD,KADW/B,EE+BGkN,KF9BAV,GAAUI,QAAU5M,GAAM2M,GAAeJ,MAAcvM,GE8B9C,CACjC,IAAKgI,EAAQ,EAAGf,EAASc,SAASiF,EAAS/F,QAASA,EAASe,EAAOA,IAElE,IADAS,EAASmF,OAAOZ,EAAShF,MACXS,aAAkBqE,OAAQ,OAAOrE,EAC/C,OAAO,IAAIqE,QAAO,GAEtBrB,EAAWyB,EAAOjM,KAAK+L,GAIzB,IADAG,EAAO1B,EAAS0B,OACPC,EAAOD,EAAKlM,KAAKwK,IAAWqC,MAAM,CACzC,IACErF,EAASmF,OAAOR,EAAK7L,OACrB,MAAOd,GAEP,MADAkN,cAAclC,GACRhL,EAER,GAAqB,iBAAVgI,GAAsBA,GAAUA,aAAkBqE,OAAQ,OAAOrE,EAC5E,OAAO,IAAIqE,QAAO,YC9CpB,CAAE9D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D+C,MAAO,SAASA,MAAMC,GACpB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAQqM,QAAQ3C,GAAU,SAAUhJ,EAAKlB,EAAOkM,GAC9C,IAAKU,EAAc5M,EAAOkB,EAAKwL,GAAM,OAAOR,MAC3C,CAAEJ,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQR,WCbnE,IAAIsB,GAAUtC,gBAAgB,8BAIb,SAAU/I,EAAGsL,GAC5B,IACIC,EADAC,EAAI5K,SAASZ,GAAGyL,YAEpB,YAAa1M,IAANyM,GAAiDzM,OAA7BwM,EAAI3K,SAAS4K,GAAGH,KAAyBC,EAAqB1H,YAAU2H,YCEnG,CAAEvF,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D0D,OAAQ,SAASA,OAAOV,GACtB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GAClF4M,EAAS,IAAKC,mBAAmBX,EAAKrF,WAAW,SACjDiG,EAASjI,YAAU+H,EAAOtK,KAI9B,OAHA+J,QAAQ3C,GAAU,SAAUhJ,EAAKlB,GAC3B4M,EAAc5M,EAAOkB,EAAKwL,IAAMY,EAAO5N,KAAK0N,EAAQlM,EAAKlB,KAC5D,CAAE8L,YAAY,EAAMC,aAAa,IAC7BqB,aCbT,CAAE3F,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D8D,KAAM,SAASA,KAAKd,GAClB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAOqM,QAAQ3C,GAAU,SAAUhJ,EAAKlB,EAAOkM,GAC7C,GAAIU,EAAc5M,EAAOkB,EAAKwL,GAAM,OAAOR,EAAKlM,KAC/C,CAAE8L,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ9E,kBCPjE,CAAEO,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D+D,QAAS,SAASA,QAAQf,GACxB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAOqM,QAAQ3C,GAAU,SAAUhJ,EAAKlB,EAAOkM,GAC7C,GAAIU,EAAc5M,EAAOkB,EAAKwL,GAAM,OAAOR,EAAKhL,KAC/C,CAAE4K,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ9E,kBCPjE,CAAEO,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D5C,SAAU,SAASA,SAAS4G,GAC1B,OAAOZ,QAAQF,eAAetK,SAAStD,QAAQ,SAAUmC,EAAKlB,EAAOkM,GACnE,ICXqBwB,EDWH1N,MCXM2N,EDWCF,ICTXC,GAAKA,GAAKC,GAAKA,EDSY,OAAOzB,ICXrC,IAAUwB,EAAGC,IDYvB,CAAE7B,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQR,mBELjE,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DmE,MAAO,SAASA,MAAMH,GACpB,OAAOZ,QAAQF,eAAetK,SAAStD,QAAQ,SAAUmC,EAAKlB,EAAOkM,GACnE,GAAIlM,IAAUyN,EAAe,OAAOvB,EAAKhL,KACxC,CAAE4K,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ9E,kBCAjE,CAAEO,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DoE,QAAS,SAASA,QAAQpB,GACxB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GAClF4M,EAAS,IAAKC,mBAAmBX,EAAKrF,WAAW,SACjDiG,EAASjI,YAAU+H,EAAOtK,KAI9B,OAHA+J,QAAQ3C,GAAU,SAAUhJ,EAAKlB,GAC/BsN,EAAO5N,KAAK0N,EAAQR,EAAc5M,EAAOkB,EAAKwL,GAAM1M,KACnD,CAAE8L,YAAY,EAAMC,aAAa,IAC7BqB,aCVT,CAAE3F,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DqE,UAAW,SAASA,UAAUrB,GAC5B,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GAClF4M,EAAS,IAAKC,mBAAmBX,EAAKrF,WAAW,SACjDiG,EAASjI,YAAU+H,EAAOtK,KAI9B,OAHA+J,QAAQ3C,GAAU,SAAUhJ,EAAKlB,GAC/BsN,EAAO5N,KAAK0N,EAAQlM,EAAK0L,EAAc5M,EAAOkB,EAAKwL,MAClD,CAAEZ,YAAY,EAAMC,aAAa,IAC7BqB,aCdT,CAAE3F,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAE7DsE,MAAO,SAASA,MAAMtC,GAIpB,IAHA,IAAIiB,EAAMrK,SAAStD,MACfuO,EAASjI,YAAUqH,EAAI5J,KACvBmE,EAAI,EACDA,EAAIxB,UAAUC,QACnBmH,QAAQpH,UAAUwB,KAAMqG,EAAQ,CAAEzD,KAAM6C,EAAKZ,YAAY,IAE3D,OAAOY,aCRT,CAAEjF,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DuE,OAAQ,SAASA,OAAOvB,GACtB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BuB,EAAYxI,UAAUC,OAAS,EAC/BwI,EAAcD,OAAYzN,EAAYiF,UAAU,GAUpD,GATAJ,YAAUoH,GACVI,QAAQ3C,GAAU,SAAUhJ,EAAKlB,GAC3BiO,GACFA,GAAY,EACZC,EAAclO,GAEdkO,EAAczB,EAAWyB,EAAalO,EAAOkB,EAAKwL,KAEnD,CAAEZ,YAAY,EAAMC,aAAa,IAChCkC,EAAW,MAAMxN,UAAU,6CAC/B,OAAOyN,aChBT,CAAEzG,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D0E,KAAM,SAASA,KAAK1B,GAClB,IAAIC,EAAMrK,SAAStD,MACfmL,EAAWyC,eAAeD,GAC1BE,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAOqM,QAAQ3C,GAAU,SAAUhJ,EAAKlB,EAAOkM,GAC7C,GAAIU,EAAc5M,EAAOkB,EAAKwL,GAAM,OAAOR,MAC1C,CAAEJ,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQR,mBCTjE,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D2E,OAAQ,SAASA,OAAOlN,EAAKmN,GAC3B,IAAI3B,EAAMrK,SAAStD,MACf2G,EAASD,UAAUC,OACvBL,YAAUgJ,GACV,IAAIC,EAAiB5B,EAAI5K,IAAIZ,GAC7B,IAAKoN,GAAkB5I,EAAS,EAC9B,MAAMjF,UAAU,yBAElB,IAAIT,EAAQsO,EAAiB5B,EAAIpN,IAAI4B,GAAOmE,YAAUK,EAAS,EAAID,UAAU,QAAKjF,EAAtC6E,CAAiDnE,EAAKwL,GAElG,OADAA,EAAI5J,IAAI5B,EAAKmN,EAASrO,EAAOkB,EAAKwL,IAC3BA,KCdX,qBAAiB,WAGf,IAFA,IAAI5J,EAAMT,SAAStD,MACfwP,EAAQlJ,YAAUvC,EAAI0L,KACjBnF,EAAI,EAAGC,EAAM7D,UAAUC,OAAQ2D,EAAIC,EAAKD,IAC/CkF,EAAM7O,KAAKoD,EAAK2C,UAAU4D,IAE5B,OAAOvG,WCJP,CAAE2E,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DgF,OAAQ,SAASA,SACf,OAAOC,iBAAiB9E,MAAM7K,KAAM0G,sBCFtC,CAAEgC,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DC,UAAW,SAASA,YAClB,OAAOC,oBAAoBC,MAAM7K,KAAM0G,sBCEzC,CAAEgC,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DkF,WAAY,SAASA,WAAWlD,GAC9B,IAAI3I,EAAMT,SAAStD,MACf6P,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,QAAxC,CAAiDvE,GAC1DqG,EAAU9D,YAAUuJ,EAAe,QAIvC,OAHA/B,QAAQpB,GAAU,SAAUzL,GAC1BmJ,EAAQzJ,KAAKkP,EAAQ5O,MAEhB4O,KChBX,mBAAyC,SAAUnQ,GAEjD,OAAOoQ,IAAIzJ,UAAU0J,OAAOpP,KAAKjB,ICc5B,SAASsQ,WAAWC,GACR,iBAANA,IAAgBA,EAAIC,OAAOD,QAElCE,KAAEA,GAAS,CAAEA,KAAM,IAAMF,SAEvBG,EAAU,oBAELD,WA2CJ9P,OAAOgQ,OACZhQ,OAAOiQ,OACLF,EACA,CACErN,IA3CM,SAASkN,SACF,iBAANA,IACTA,EAAIC,OAAOD,IAENM,SAASJ,EAAOF,KAAOE,IAwC1BpM,IArCM,SAASkM,GACF,iBAANA,IACTA,EAAIC,OAAOD,IAEbE,GAAS,IAAMF,GAkCXhM,KA/BO,SAASgM,SACH,iBAANA,IACTA,EAAIC,OAAOD,IAENM,QAA+B,MAAtBJ,EAAQ,IAAMF,KA4B1BO,OAzBS,SAASP,GACL,iBAANA,IACTA,EAAIC,OAAOD,IAEbE,GAAS,IAAMF,GAsBX7O,SAnBW,kBACR+O,EAAK/O,SAAS,IAmBjBqP,MAhBQ,SAASR,GACJ,iBAANA,IACTA,EAAIC,OAAOD,IAEbE,KAAU,IAAMF,OC1Cb,SAASS,eAAeC,UAC7BA,EAAOC,WACAD,EAIF,SAASE,sBACRC,UACJA,EADIC,WAEJA,EAFIC,iBAGJA,GACE,CACFF,UAAWd,WAAW,IACtBe,WAAY,GAEZC,iBAAkB,IAAIlB,SAGpBmB,IAAEA,GAAQ,CAAEA,IAAK,UAGfjI,EAAO3I,OAAO6Q,OAClB,CAAEH,WAAAA,GACF,CAEED,UAAW,CACTvQ,IAAK,kBACIuQ,EAAU7P,QAKrBsD,GAAI,CACFhE,IAAK,kBACI0Q,MA2BTE,iBAAmB,SAAYC,GAC/BL,EAAWK,EAAU5F,eAChBuF,EAAWK,EAAU5F,MAC5BsF,EAAUL,MAAMW,EAAU7M,IAC1ByM,EAAiBK,OAAOD,YAarB/Q,OAAOgQ,OACZhQ,OAAOiQ,OACLtH,EACA,CACE4H,SAzCW,WACfK,EAAM,GACND,EAAiBM,SAASF,GAAcD,iBAAiBC,MAwCrDG,OApCS,SAAShN,GACtB0M,EAAM1M,GAoCFiN,cAhCgB,SAAYJ,GAC3BL,EAAWK,EAAU5F,QACxBuF,EAAWK,EAAU5F,MAAQ,IAAI4F,EAAUK,YAC3CX,EAAU/M,IAAIqN,EAAU7M,IACxByM,EAAiBvB,IAAI2B,KA6BnBD,iBAAAA,iBACAO,aAbe,SAAYN,SACzB5F,EAA6B,iBAAd4F,EAA0BA,EAAYA,EAAU5F,YAC9D+E,QAAQQ,EAAWvF,QCrFvB,SAASmG,YAAeC,SACvBC,YACJA,EAAc,EADVX,OAEJA,EAFIY,QAGJA,GACEF,EAEEG,EAAO,OAGR,IAAI7J,EAAI,EAAGA,EAAI2J,EAAa3J,IAC/B6J,EAAK5N,KAAK+M,YAeL7Q,OAAOgQ,OAAO,CACnB9P,IAbU,kBACNwR,EAAKpL,OAAS,EACToL,EAAKC,MAELd,KAUTe,QANc,SAASC,GACvBH,EAAK5N,KAAK2N,EAAQI,sBC3BpB,CAAExJ,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D+C,MAAO,SAASA,MAAMC,GACpB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8J,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAQqM,QAAQ3C,GAAU,SAAUlK,EAAOkM,GACzC,IAAKU,EAAc5M,EAAOA,EAAO8C,GAAM,OAAOoJ,MAC7C,CAAEH,aAAa,EAAMC,aAAa,IAAQR,mBCJ/C,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D0D,OAAQ,SAASA,OAAOV,GACtB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8J,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GAClFoO,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,SACjDkH,EAAQlJ,YAAUuJ,EAAOJ,KAI7B,OAHA3B,QAAQ3C,GAAU,SAAUlK,GACtB4M,EAAc5M,EAAOA,EAAO8C,IAAMyL,EAAM7O,KAAKkP,EAAQ5O,KACxD,CAAE+L,aAAa,IACX6C,aCbT,CAAEnH,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D8D,KAAM,SAASA,KAAKd,GAClB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8J,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAOqM,QAAQ3C,GAAU,SAAUlK,EAAOkM,GACxC,GAAIU,EAAc5M,EAAOA,EAAO8C,GAAM,OAAOoJ,EAAKlM,KACjD,CAAE+L,aAAa,EAAMC,aAAa,IAAQ9E,kBCN/C,CAAEO,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D0H,aAAc,SAASA,aAAa1F,GAClC,IAAI3I,EAAMT,SAAStD,MACf6P,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,SACjD+J,EAAW/L,YAAUvC,EAAIhB,KACzByM,EAAQlJ,YAAUuJ,EAAOJ,KAI7B,OAHA3B,QAAQpB,GAAU,SAAUzL,GACtBoR,EAAS1R,KAAKoD,EAAK9C,IAAQuO,EAAM7O,KAAKkP,EAAQ5O,MAE7C4O,aCXT,CAAEnH,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D4H,eAAgB,SAASA,eAAe5F,GACtC,IAAI3I,EAAMT,SAAStD,MACfqS,EAAW/L,YAAUvC,EAAIhB,KAC7B,OAAQ+K,QAAQpB,GAAU,SAAUzL,EAAOkM,GACzC,IAAkC,IAA9BkF,EAAS1R,KAAKoD,EAAK9C,GAAiB,OAAOkM,MAC9C,CAAEF,aAAa,IAAQR,mBCJ5B,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D6H,WAAY,SAASA,WAAW7F,GAC9B,IAAIvB,ECVS,SAAUzL,GACzB,IAAI8S,EAAiBjF,kBAAkB7N,GACvC,GAA6B,mBAAlB8S,EACT,MAAM9Q,UAAUyB,OAAOzD,GAAM,oBAC7B,OAAO4D,SAASkP,EAAe7R,KAAKjB,IDMrB+S,CAAYzS,MACvB0S,EAAWpP,SAASoJ,GACpB2F,EAAWK,EAAS3P,IAKxB,MAJuB,mBAAZsP,IACTK,EAAW,IAAKpK,WAAW,OAAhB,CAAwBoE,GACnC2F,EAAW/L,YAAUoM,EAAS3P,OAExB+K,QAAQ3C,GAAU,SAAUlK,EAAOkM,GACzC,IAAuC,IAAnCkF,EAAS1R,KAAK+R,EAAUzR,GAAkB,OAAOkM,MACpD,CAAEH,aAAa,EAAMC,aAAa,IAAQR,mBEb/C,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DiI,aAAc,SAASA,aAAajG,GAClC,IAAI3I,EAAMT,SAAStD,MACfqS,EAAW/L,YAAUvC,EAAIhB,KAC7B,OAAQ+K,QAAQpB,GAAU,SAAUzL,EAAOkM,GACzC,IAAkC,IAA9BkF,EAAS1R,KAAKoD,EAAK9C,GAAkB,OAAOkM,MAC/C,CAAEF,aAAa,IAAQR,mBCN5B,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DtE,KAAM,SAASA,KAAKwM,GAClB,IAAI7O,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8O,OAAoBpR,IAAdmR,EAA0B,IAAMzP,OAAOyP,GAC7CzK,EAAS,GAEb,OADA2F,QAAQ3C,EAAUhD,EAAOhE,KAAM,CAAE2G,KAAM3C,EAAQ6E,aAAa,IACrD7E,EAAO/B,KAAKyM,cCHrB,CAAEnK,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DiD,IAAK,SAASA,IAAID,GAChB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8J,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GAClFoO,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,SACjDkH,EAAQlJ,YAAUuJ,EAAOJ,KAI7B,OAHA3B,QAAQ3C,GAAU,SAAUlK,GAC1BuO,EAAM7O,KAAKkP,EAAQhC,EAAc5M,EAAOA,EAAO8C,MAC9C,CAAEiJ,aAAa,IACX6C,aCbT,CAAEnH,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DuE,OAAQ,SAASA,OAAOvB,GACtB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1BmL,EAAYxI,UAAUC,OAAS,EAC/BwI,EAAcD,OAAYzN,EAAYiF,UAAU,GAUpD,GATAJ,YAAUoH,GACVI,QAAQ3C,GAAU,SAAUlK,GACtBiO,GACFA,GAAY,EACZC,EAAclO,GAEdkO,EAAczB,EAAWyB,EAAalO,EAAOA,EAAO8C,KAErD,CAAEiJ,aAAa,IACdkC,EAAW,MAAMxN,UAAU,6CAC/B,OAAOyN,aChBT,CAAEzG,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7D0E,KAAM,SAASA,KAAK1B,GAClB,IAAI3J,EAAMT,SAAStD,MACfmL,EAAWgH,eAAepO,GAC1B8J,EAAgBX,oBAAKQ,EAAYhH,UAAUC,OAAS,EAAID,UAAU,QAAKjF,EAAW,GACtF,OAAOqM,QAAQ3C,GAAU,SAAUlK,EAAOkM,GACxC,GAAIU,EAAc5M,EAAOA,EAAO8C,GAAM,OAAOoJ,MAC5C,CAAEH,aAAa,EAAMC,aAAa,IAAQR,mBCN/C,CAAE/D,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DoI,oBAAqB,SAASA,oBAAoBpG,GAChD,IAAI3I,EAAMT,SAAStD,MACf6P,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,QAAxC,CAAiDvE,GAC1DqG,EAAU9D,YAAUuJ,EAAe,QACnCL,EAAQlJ,YAAUuJ,EAAOJ,KAI7B,OAHA3B,QAAQpB,GAAU,SAAUzL,GAC1BmJ,EAAQzJ,KAAKkP,EAAQ5O,IAAUuO,EAAM7O,KAAKkP,EAAQ5O,MAE7C4O,aCTT,CAAEnH,OAAQ,MAAO8B,OAAO,EAAMC,MAAM,EAAMX,OAAQY,GAAW,CAC7DqI,MAAO,SAASA,MAAMrG,GACpB,IAAI3I,EAAMT,SAAStD,MACf6P,EAAS,IAAKvB,mBAAmBvK,EAAKuE,WAAW,QAAxC,CAAiDvE,GAE9D,OADA+J,QAAQpB,EAAUpG,YAAUuJ,EAAOJ,KAAM,CAAE3E,KAAM+E,IAC1CA,mBCYJ,SAASmD,YAAYpB,SAEpBqB,gBACJA,EAAkB,GADdC,cAEJA,EAAgB,OACdtB,GAGEuB,WACJA,EADIpC,WAEJA,EAFIqC,SAGJA,EAHIC,QAIJA,EAJIC,WAKJA,GACE,CACFH,WAAY,IAAIhH,IAChB4E,WAAY,IAAI5E,IAChBiH,SAAU,IAAIjH,IACdkH,QAAS,GACTC,WAAY3B,YAAY,CAACT,OAAQL,cAAeiB,QAASpB,eAAgBmB,YAAaoB,SAIpFM,eACFA,EADEC,YAEFA,EAFEC,YAGFA,GACE,CACFF,eAAgB,GAChBC,YAAa,GACbC,YAAa,UAITC,0BAA6B/C,UAC3BG,EAAYqC,EAAW5S,IAAIoQ,EAAOG,WACnCA,EAGEA,EAAUhJ,SAAS6I,IACtBG,EAAU3M,KAAKwM,GAHjBwC,EAAWpP,IAAI4M,EAAOG,UAAW,CAACH,KAShCgD,+BAAkChD,UAChCG,EAAYqC,EAAW5S,IAAIoQ,EAAOG,WAClC8C,EAAM9C,MAAAA,SAAAA,EAAWjJ,QAAQ8I,GAC3BiD,GAAOA,GAAO,IAChB9C,MAAAA,GAAAA,EAAW+C,OAAOD,EAAK,KAIrBxD,EAAU,yBAGL9D,MAAMwH,KAAKzT,OAAO0P,OAAOgB,2BAKzBzE,MAAMwH,KAAKzT,OAAO0P,OAAOqD,0BAKzB9G,MAAMwH,KAAKT,YAkIfhT,OAAOgQ,OACZhQ,OAAOiQ,OACLF,EACA,CACE2D,aA9He,iBACbpD,EAAS2C,EAAW/S,MACpBgE,IAAOiP,SACb7C,EAAOY,OAAOhN,GACd6O,EAASrP,IAAIQ,EAAIoM,GACVA,GA0HHqD,aAjHe,SAASrD,SACtB5F,EAAIqI,EAAS/B,OAAOV,EAAOpM,WAC7BwG,GACFuI,EAAWrB,QAAQtB,GAEd5F,GA6GHkJ,gBArGkB,SAAYrC,MAC9BsB,GAAiBK,EAAiBL,QAC9B,IAAIgB,MAAM,0CAGZ9C,ECvGH,SAAS+C,iBAAoBvC,SAC5BrN,GAAEA,EAAFiH,KAAMA,EAANiG,WAAYA,GAAeG,GAG3BwB,SAAEA,GAAa,CAAEA,SAAU,IAAItD,KAE/BM,EAAU,iBAEL7L,qBAIAiH,yBAKAc,MAAMwH,KAAKV,4BAKX3B,WA4BJpR,OAAOgQ,OACZhQ,OAAOiQ,OACLF,EACA,CACEgE,UARY,SAASzD,UAClByC,EAASrQ,IAAI4N,IAQhB0D,WAvBa,SAAS1D,GAC1ByC,EAAS3D,IAAIkB,IAuBT2D,cAdgB,SAAS3D,GAC7ByC,EAAS/B,OAAOV,OD4DEwD,CAAiB,IAAIvC,EAAMrN,KADhCgP,WAEbxC,EAAWhN,IAAIqN,EAAU5F,KAAM4F,GACxBA,GA+FHmD,gBAtFkB,SAAYnD,SAC5BrG,EAAIgG,EAAWM,OAAOD,EAAU5F,aAClCT,GACFqG,EAAUgC,SAAS9B,SAASX,GAAWA,EAAOQ,iBAAiBC,KAE1DrG,GAkFHyJ,sBA1EwB,SAAS7D,KAAmBI,UACxD4C,+BAA+BhD,GAC/BI,EAAWO,SAASF,IAClBT,EAAOa,cAAcJ,GACrBA,EAAUiD,WAAW1D,MAEvB+C,0BAA0B/C,GACnBA,GAoEH8D,2BA5D6B,SAAS9D,KAAmBI,UAC7D4C,+BAA+BhD,GAC/BI,EAAWO,SAASF,IAClBT,EAAOQ,iBAAiBC,GACxBA,EAAUkD,cAAc3D,MAE1B+C,0BAA0B/C,GACnBA,GAsDH+D,aA9Ce,SAAS9C,SAEtB+C,EEvKH,SAASC,cAAchD,SACtBrN,GAAEA,EAAFoQ,OAAMA,EAAN5D,WAAcA,GAAea,GAE7Bd,UAAEA,GAAc,CAAEA,UAAWd,WAAW,SAC1C6E,QAAEA,GAAY,CAAEA,SAAS,GAE7B9D,EAAWO,SAASF,GAAcN,EAAU/M,IAAIqN,EAAU7M,YAEpD6L,EAAU,iBAEL7L,0BAIAuM,EAAU7P,4BAIV4T,WAgBJxU,OAAOgQ,OACZhQ,OAAOiQ,OACLF,EACA,CACE0E,OAhBS,WACbD,GAAU,GAgBNE,QAbU,WACdF,GAAU,GAaNxF,OAVS,SAAS2F,EAAY5B,GAClCuB,EAAOK,EAAI5B,OFwIIwB,CAAc,IAAIhD,EAAMrN,KAD1BkP,WAEbJ,EAAQlP,KAAKwQ,GACNA,GA2CHM,aAnCe,SAASN,SACtBf,EAAMP,EAAQxL,QAAQ8M,UACxBf,GAAO,IACTP,EAAQQ,OAAOD,EAAK,IACb,IAgCLvE,OAvBS,SAAS2F,GACtB3B,EAAQ/B,SAASqD,OACXA,EAAOE,QAAS,OACZzB,EAAWD,EAAW5S,IAAIoU,EAAO7D,WACnCsC,GAAYA,EAASzM,QACvBgO,EAAOtF,OAAO2F,EAAI5B"}